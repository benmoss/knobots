# update-deps.yml
name: "Update Go Deps and Codegen"
description: "Updates golang dependencies and codegen using using hack/update-deps.sh and hack/update-codegen.sh"
branding:
  icon: download-cloud
  color: green
inputs: 
  branch:  # TODO: move to general template
    description: "Select a non-default branch"
  release:
    description: "Target release for knative dependencies (used by Buoy)"
  pr-empty-deps:
    description: "If true, send update PRs even for deps changes that don't change vendor. Defaults to false to reduce no-op PR spam."
outputs:
  create_pr:
    description: "Whether a PR should be created because there were meaningful changes"
  deplog:
    description: "Report on module changes"
runs:
  using: 'docker'
  image: 'Dockerfile'
  env:
    RELEASE: ${{ inputs.release }}
    FORCE_DEPS: ${{ inputs.pr-empty-deps }}
